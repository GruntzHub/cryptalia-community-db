<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Echoes of Cryptalia</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    const ITEMS = [
      { id: 1, name: "Extracts of the Great Plains", desc: "Ancient essence of the plains.", rarity: "rare", img: "https://gruntzhub.github.io/cryptalia-community-db/sprites/items/Extracts%20of%20the%20Great%20Plains.png", stats: { DGL: 37, INI: 40 }, res: {} },
      { id: 2, name: "Mirrored Light", desc: "Reflects the essence of truth.", rarity: "rare", img: "https://gruntzhub.github.io/cryptalia-community-db/sprites/items/Mirrored%20Light.png", stats: { DEX: 25, STR: 15 }, res: { ICE: 10 } },
      { id: 3, name: "Volcanic Adoration", desc: "Born from the heart of fire.", rarity: "common", img: "https://gruntzhub.github.io/cryptalia-community-db/sprites/items/Volcanic%20Adoration.png", stats: { STR: 30, CON: 20 }, res: { FIRE: 15 } }
    ];

    const CHARS = [
      { id: 1, name: "Tsydora", img: "https://gruntzhub.github.io/cryptalia-community-db/sprites/characters/Tsydora.webp" },
      { id: 2, name: "Luro", img: "https://gruntzhub.github.io/cryptalia-community-db/sprites/characters/Luro.webp" },
      { id: 3, name: "OkhUr", img: "https://gruntzhub.github.io/cryptalia-community-db/sprites/characters/OkhUr.webp" },
      { id: 4, name: "Yaelie", img: "https://gruntzhub.github.io/cryptalia-community-db/sprites/characters/Yaelie.webp" }
    ];

    let currentTab = 'items';
    let selectedItems = [];
    let selectedChar = null;

    function render() {
      const app = document.getElementById('app');
      app.innerHTML = `
        <div class="min-h-screen bg-gradient-to-br from-sky-400 via-blue-300 to-cyan-200 p-3">
          <div class="max-w-7xl mx-auto">
            <div class="relative mb-4 p-4 bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl border-4 border-amber-500 shadow-2xl">
              <h1 class="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-amber-500">Echoes of Cryptalia</h1>
            </div>

            <div class="flex gap-2 mb-4 justify-center">
              <button onclick="switchTab('items')" class="px-3 py-2 rounded-lg font-bold border-2 text-xs ${currentTab === 'items' ? 'bg-amber-500 text-slate-900' : 'bg-slate-800 text-amber-100'}">Items</button>
              <button onclick="switchTab('builder')" class="px-3 py-2 rounded-lg font-bold border-2 text-xs ${currentTab === 'builder' ? 'bg-amber-500 text-slate-900' : 'bg-slate-800 text-amber-100'}">Build Creator</button>
            </div>

            <div id="content"></div>
          </div>
        </div>
      `;

      renderContent();
    }

    function renderContent() {
      const content = document.getElementById('content');
      
      if (currentTab === 'items') {
        content.innerHTML = `
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
            ${ITEMS.map(item => `
              <div class="bg-slate-800 border-2 border-amber-500 rounded-lg p-2">
                <img src="${item.img}" alt="${item.name}" crossorigin="anonymous" class="w-full h-16 object-contain bg-slate-700 rounded mb-1">
                <h3 class="font-bold text-amber-100 text-xs mb-1">${item.name}</h3>
                <p class="text-gray-400 text-xs italic mb-1 line-clamp-2">${item.desc}</p>
                <div class="flex gap-1 mb-2 flex-wrap">
                  ${Object.entries(item.stats).map(([k, v]) => `<span class="text-xs bg-blue-900/50 px-1 py-0.5 rounded text-amber-400">${k}+${v}</span>`).join('')}
                  ${Object.entries(item.res || {}).map(([k, v]) => `<span class="text-xs bg-green-700 px-1 py-0.5 rounded text-white">${k}+${v}</span>`).join('')}
                </div>
                <button onclick="addItem(${item.id})" class="w-full bg-amber-500 text-slate-900 font-bold py-1 rounded text-xs">+ Add</button>
              </div>
            `).join('')}
          </div>
        `;
      } else {
        content.innerHTML = `
          <div class="space-y-4">
            <div>
              <h2 class="text-lg font-bold text-slate-800 mb-2">Select Character</h2>
              <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                ${CHARS.map(char => `
                  <button onclick="selectChar(${char.id})" class="p-2 rounded-lg border-2 ${selectedChar?.id === char.id ? 'bg-amber-500' : 'bg-slate-800'}">
                    <img src="${char.img}" alt="${char.name}" crossorigin="anonymous" class="w-full h-20 object-contain mb-1">
                    <h3 class="font-bold text-white text-xs">${char.name}</h3>
                  </button>
                `).join('')}
              </div>
            </div>

            <div>
              <h2 class="text-lg font-bold text-slate-800 mb-2">Current Build (${selectedItems.length}/2)</h2>
              <div class="space-y-2">
                ${selectedItems.length === 0 ? '<p class="text-center py-6 bg-slate-800 rounded text-gray-400 text-xs">Add items from Items tab</p>' : ''}
                ${selectedItems.map(item => `
                  <div class="bg-slate-800 border border-amber-500 rounded p-2 flex justify-between items-center">
                    <div>
                      <h4 class="font-bold text-amber-100 text-xs">${item.name}</h4>
                      <p class="text-xs text-gray-400">Item</p>
                    </div>
                    <button onclick="removeItem(${item.id})" class="text-red-400 text-xs">Remove</button>
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
        `;
      }
    }

    function switchTab(tab) {
      currentTab = tab;
      render();
    }

    function addItem(id) {
      if (selectedItems.length >= 2) return alert('Max 2 items!');
      const item = ITEMS.find(i => i.id === id);
      if (selectedItems.find(i => i.id === id)) return alert('Already added!');
      selectedItems.push(item);
      render();
    }

    function removeItem(id) {
      selectedItems = selectedItems.filter(i => i.id !== id);
      render();
    }

    function selectChar(id) {
      selectedChar = CHARS.find(c => c.id === id);
      render();
    }

    // Inicializa
    render();
  </script>
</body>
</html>
